"use strict";(self["webpackChunkneo_stock"]=self["webpackChunkneo_stock"]||[]).push([[240],{625:function(e,t,o){o.d(t,{b:function(){return a}});var l=o(5234);const a=(0,l.nY)("useHistoryStore",{state:()=>({historySales:[],dateHistorySales:[],grandTotalHistory:[]}),getters:{getHistorySales(e){return e.historySales},getDateHistorySales(e){return e.dateHistorySales},getGrandTotalHistory(e){return e.grandTotalHistory}},actions:{pushToHistorySales(e){this.historySales.unshift(e)},pushDateToHistorySales(e){this.dateHistorySales.unshift(e)},pushToGrandTotalHistory(e){this.grandTotalHistory.unshift(e)}}})},4501:function(e,t,o){o.r(t),o.d(t,{default:function(){return de}});var l=o(6768),a=o(144),n=o(5130),s=o(4232),i=o.p+"img/Qr Code.de8bec87.gif";const r={class:""};function c(e,t){return(0,l.uX)(),(0,l.CE)("div",r,t[0]||(t[0]=[(0,l.Lk)("div",{class:"lds-ellipsis"},[(0,l.Lk)("div"),(0,l.Lk)("div"),(0,l.Lk)("div"),(0,l.Lk)("div")],-1)]))}var d=o(1241);const u={},m=(0,d.A)(u,[["render",c],["__scopeId","data-v-79dcc53c"]]);var v=m,p=o(6785),k=o(5234);const b=(0,k.nY)("UseSystemValues",{state(){return{showAddStockScanView:!1,showSaleConfirmationView:!1,isWindowKeyDownListener:!1}},getters:{getIsOutOfStockScanView(){return this.showAddStockScanView},getIsSaleConfirmationView(){return this.showSaleConfirmationView},getIsWindowKeyDownListenerActive(){return this.isWindowKeyDownListener}},actions:{setIsOutOfStockScanView(e){this.showAddStockScanView=e},setIsSaleConfirmationView(e){this.showSaleConfirmationView=e},setIsWindowKeyDownListener(e){this.isWindowKeyDownListener=e}}}),f={class:""},w={class:"flex flex-col items-center gap-4 p-2 bg-white rounded-lg shadow-2xl min-w-48 min-h-80 max-w-72 font-poppins"},g={class:"text-lg font-bold font-poppins text-sky-800"},y={class:"flex"};var x=(0,l.pM)({__name:"AddItemStock",props:{itemName:{type:String,default:"Maquillaje default",required:!0},itemCode:{type:String,default:"123456",required:!0}},setup(e){const t=(0,p.R)(),o=b();let i=(0,a.KR)(1);const r=e=>{"increase"===e?i.value++:"decrease"===e&&i.value>1&&i.value--},c=e=>{t.editItemCartStock(e,i.value),o.setIsOutOfStockScanView(!1)},d=e;return(e,t)=>{const o=(0,l.g2)("v-icon");return(0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",w,[(0,l.Lk)("div",null,[(0,l.bF)(o,{name:"bi-cart-x",scale:"2",color:"#FFB744"}),(0,l.Lk)("p",g,"'"+(0,s.v_)(d.itemName)+"'",1),t[4]||(t[4]=(0,l.Lk)("h2",{class:"font-semibold text text-sky-800"},"No tiene existencia disponible en el sistema y no puede ser vendido a menos que sea agregada más existencia ",-1)),t[5]||(t[5]=(0,l.Lk)("h3",{class:"font-semibold text-orange-700"},"Una vez se agregue, escanee nuevamente ",-1))]),(0,l.Lk)("div",y,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.i9)(i)?i.value=e:i=e),class:"w-full text-center rounded-md shadow-sm bg-slate-200",type:"number",placeholder:"0",min:"1",readonly:""},null,512),[[n.Jo,(0,a.R1)(i)]]),(0,l.bF)(o,{onClick:t[1]||(t[1]=e=>r("increase")),class:"cursor-pointer active:text-emerald-400 hover:text-emerald-700 hover:scale-110",name:"bi-arrow-up-circle-fill",scale:"1.5",color:"#047857"}),(0,l.bF)(o,{onClick:t[2]||(t[2]=e=>r("decrease")),class:"cursor-pointer active:text-sky-400",name:"bi-arrow-down-circle-fill",scale:"1.5",color:"#0369a1"})]),(0,l.Lk)("button",{onClick:t[3]||(t[3]=e=>c(d.itemCode)),class:"px-4 py-2 text-white transition duration-300 ease-in-out rounded-lg bg-emerald-600 hover:bg-emerald-500"},"Agregar "+(0,s.v_)((0,a.R1)(i)),1)])])}}});const h=x;var L=h,C=o(625),S=o(4084);const R={class:""},I={class:"flex flex-col items-center justify-center"},V={class:"p-2 font-medium bg-white rounded-md shadow-md min-w-80 font-poppins"},_={class:"text-slate-800"},K={class:"font-bold text-teal-600"},T={class:"flex items-center justify-around"},E={class:"text-slate-800"},D={class:"flex justify-around mt-10"};var H=(0,l.pM)({__name:"SaleConfirmation",props:{total:{type:Number,default:37,required:!0}},setup(e){const t=()=>{(0,S.oR)("La venta se realizo con exito!",{type:"default",autoClose:3e3})},o=()=>{(0,S.oR)("No se puede vender ya que el dinero ingresado es insuficiente",{type:"error",autoClose:3e3})},i=b(),r=(0,p.R)(),c=(0,C.b)(),d=e,u=(0,a.KR)();let m=(0,l.EW)((()=>u.value-d.total)),v=(0,l.EW)((()=>d.total-u.value));const k=()=>{i.setIsSaleConfirmationView(!1),i.setIsWindowKeyDownListener(!0)},f=(0,a.KR)(),w=()=>{i.getIsSaleConfirmationView&&f.value&&f.value.focus()},g=()=>{try{if(u.value<d.total)return void o();if(u.value>=d.total)return r.editTotalStock(),c.pushToHistorySales(r.getCartItems),c.pushDateToHistorySales((new Date).toLocaleString()),c.pushToGrandTotalHistory(r.getTotalCartPrice),r.clearCart(),t(),i.setIsSaleConfirmationView(!1),void i.setIsWindowKeyDownListener(!0)}catch(e){console.log(e)}};return(0,l.sV)((()=>{w()})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("section",I,[(0,l.Lk)("div",V,[t[2]||(t[2]=(0,l.Lk)("h1",{class:"text-xl text-teal-700"},"Confirmar Venta",-1)),(0,l.Lk)("h3",_,[t[1]||(t[1]=(0,l.eW)("Total a cobrar: ")),(0,l.Lk)("span",K,"$"+(0,s.v_)(d.total),1)]),t[3]||(t[3]=(0,l.Lk)("h4",{class:"text-slate-600"},"Cantidad que el cliente paga:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"number",placeholder:"Ingrese el monto",class:"font-medium text-center bg-teal-100 border border-teal-600 rounded-md focus:outline-none text-sky-800 placeholder:text-center placeholder:text-slate-600",title:"Cantidad que el cliente paga",min:"0",ref_key:"inputUserPayment",ref:f},null,512),[[n.Jo,u.value]]),(0,l.Lk)("div",T,[(0,l.Lk)("div",null,[(0,l.bo)((0,l.Lk)("h3",E,"Cambio: ",512),[[n.aG,u.value>=d.total]]),(0,l.bo)((0,l.Lk)("h4",{class:"font-semibold text-orange-800"},"Restan: $"+(0,s.v_)((0,a.R1)(v)),513),[[n.aG,u.value<d.total&&u.value]]),(0,l.bo)((0,l.Lk)("h4",{class:"font-semibold text-teal-700"},"$"+(0,s.v_)((0,a.R1)(m)),513),[[n.aG,u.value>=d.total]])])]),(0,l.Lk)("article",D,[(0,l.Lk)("button",{onClick:k,class:"p-1 text-white bg-teal-600 rounded-md hover:bg-teal-500"},"Cancelar"),(0,l.Lk)("button",{onClick:g,class:(0,s.C4)([{"cursor-not-allowed":u.value<d.total},"p-1 px-2 text-white bg-teal-800 rounded-md select-none hover:bg-teal-700"])},"Finalizar Venta",2)])])])]))}});const W=H;var F=W,j=o(5250);const Q={class:""},P={class:"relative flex flex-col flex-1 w-full overflow-auto bg-slate-100 h-dvh"},X={key:0,class:"w-full bg-black"},A={class:"absolute top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-black bg-opacity-25"},N={key:1,class:"w-full"},O={class:"absolute top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-black bg-opacity-25"},U={class:"min-w-[7.6%] flex justify-center items-center"},q={class:"inline-block text-black shadow-sm font-bold bg-white rounded-full min-w-[25%]"},G={class:"font-medium text-white bg-sky-950 rounded-md min-w-[15.35%]"},$={class:"flex items-center justify-center gap-1 min-w-[15.35%]"},z=["onUpdate:modelValue"],J={class:"min-w-[15.35%] flex justify-center items-center"},M={class:"flex flex-wrap items-center justify-around w-[50%]"},B={class:"inline-block text-base font-semibold min-w-[15.35%]"},Y={class:"min-w-[15.35%]"},Z={class:"inline-block text-base text-sky-900 font-bold bg-sky-200 rounded-md min-w-[25%]"},ee={class:"min-w-[15.35%]"},te={class:"text-lg font-bold text-green-800 bg-green-100 rounded-md min-w-[60%] inline-block shadow-sm"},oe={key:2,class:""},le={class:"absolute bottom-0 flex items-center justify-around w-full px-2 bg-white rounded-tr-md rounded-tl-md min-h-11"},ae={class:"flex items-center justify-center gap-1"},ne={key:0},se={key:1},ie={class:"px-2 py-1 text-xl font-semibold text-white bg-teal-600 rounded-md font-poppins"};var re=(0,l.pM)({__name:"ScanProductView",setup(e){const t=(0,p.R)(),o=b();let r=(0,a.KR)(""),c=(0,a.KR)(!1),d=(0,a.KR)(""),u=(0,a.KR)(!1),m=(0,a.KR)(""),k=(0,a.KR)(null),f=(0,a.KR)(""),w=(0,a.KR)();const g=()=>{if(!r.value)return u.value=!1,void(m.value="");k.value&&clearTimeout(k.value),c.value=!0,d.value="Buscando...",u.value=!1,m.value="";const e=t.getTotalItems.filter((e=>e.itemCode.toUpperCase()==r.value.toUpperCase()));if(e.length>0&&0==e[0].stock)return r.value="",c.value=!1,o.setIsOutOfStockScanView(!0),f.value=e[0].itemName,void(w.value=e[0].itemCode);if(e.length>0){const l=t.getCartItems.filter((t=>t.itemCode==e[0].itemCode));if(l.length>0&&0===l[0].stock)return r.value="",f.value=l[0].itemName,w.value=l[0].itemCode,c.value=!1,void o.setIsOutOfStockScanView(!0);l.length>0?(l[0].stock--,l[0].itemQuantity++,l[0].itemSubtotal=l[0].itemQuantity*Number(l[0].itemPrice),r.value="",c.value=!1):0==l.length&&(t.addItemToCart(e[0]),r.value="",c.value=!1)}else k.value=setTimeout((()=>{c.value=!1,u.value=!0,m.value=`No se ha encontrado el producto con el codigo: '${r.value}'. Por favor, revise el código o añádalo como nuevo producto si no está registrado.`,R(m.value,15e3)}),2e3),console.log("Total items",t.getTotalItems)},y=()=>{r.value=r.value.slice(0,-1),u.value=!1,m.value="",c.value=!1};let x=(0,a.KR)(!1);const h=()=>x.value=!x.value,C=()=>{(0,S.oR)("Necesitas tener al menos un item en tu carrito",{type:"warning",autoClose:3e3})},R=(e,t)=>{(0,S.oR)(e,{type:"warning",autoClose:t})},I=()=>{if(0!==t.getCartItems.length)try{o.setIsSaleConfirmationView(!0),o.setIsWindowKeyDownListener(!1)}catch(e){R("Hubo un error, vuelva a intentarlo",3e3)}else C()},V=(0,a.KR)(),_=e=>{if(!o.getIsWindowKeyDownListenerActive)return;const t=/^[a-zA-Z0-9]$/;"Backspace"===e.key&&(r.value=r.value.slice(0,-1).toString()),t.test(e.key)&&(r.value+=e.key,g())};return(0,l.sV)((()=>{o.setIsWindowKeyDownListener(!0),o.getIsWindowKeyDownListenerActive&&window.addEventListener("keydown",_)})),(0,l.hi)((()=>{k.value&&clearTimeout(k.value),window.removeEventListener("keydown",_),o.setIsWindowKeyDownListener(!1)})),(e,d)=>{const p=(0,l.g2)("v-icon");return(0,l.uX)(),(0,l.CE)("div",Q,[(0,l.bF)(j.A,null,{"main-content":(0,l.k6)((()=>[(0,l.Lk)("div",P,[(0,a.R1)(o).getIsOutOfStockScanView?((0,l.uX)(),(0,l.CE)("div",X,[(0,l.Lk)("div",A,[(0,l.bF)(L,{class:"","item-name":(0,a.R1)(f),"item-code":(0,a.R1)(w)},null,8,["item-name","item-code"])])])):(0,l.Q3)("",!0),(0,a.R1)(o).getIsSaleConfirmationView?((0,l.uX)(),(0,l.CE)("section",N,[(0,l.Lk)("div",O,[(0,l.bF)(F,{total:(0,a.R1)(t).getTotalCartPrice},null,8,["total"])])])):(0,l.Q3)("",!0),(0,l.bF)(n.F,{name:"list",tag:"div",class:""},{default:(0,l.k6)((()=>[d[1]||(d[1]=(0,l.Lk)("div",{class:"flex py-2 mb-2 bg-white rounded-b-lg shadow-sm"},[(0,l.Lk)("div",{class:"min-w-[7.6%] rounded-lg"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Posicion del producto en el carrito"},"Pos")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Nombre del producto"}," Producto")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Cantidad de veces que se venderá el producto"},"Cantidad")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Cuantos hay en existencia o stock"},"Existencia")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Código del producto en el sistema"},"Código")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Precio por unidad del producto"},"Precio")]),(0,l.Lk)("div",{class:"min-w-[15.35%] rounded-lg bg-white"},[(0,l.Lk)("li",{class:"inline-block px-1 text-lg font-bold text-cyan-800 font-poppins",title:"Valor del producto multiplicado por la cantidad"},"Subtotal")])],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,a.R1)(t).getCartItems,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:e.itemCode,class:(0,s.C4)([{"bg-white":o%2===0,"bg-slate-50":o%2!==0},"flex items-center w-full py-3 mb-2 rounded-lg shadow-sm justify-evenly font-poppins hover:bg-sky-100 hover:shadow-md"])},[(0,l.Lk)("div",U,[(0,l.Lk)("p",q,(0,s.v_)(o+1),1),(0,a.R1)(x)?((0,l.uX)(),(0,l.Wv)(p,{key:0,onClick:e=>(0,a.R1)(t).deleteItemCart(o),class:"cursor-pointer active:text-red-400 hover:text-red-500 hover:scale-110",name:"fa-trash",scale:"1.5",color:"#b91c1c"},null,8,["onClick"])):(0,l.Q3)("",!0)]),(0,l.Lk)("p",G,(0,s.v_)(e.itemName),1),(0,l.Lk)("div",$,[(0,l.bo)((0,l.Lk)("input",{class:"font-bold text-center text-white bg-black rounded-md w-9 max-w-12","onUpdate:modelValue":t=>e.itemQuantity=t,type:"number",name:"",id:"",min:"1",placeholder:"1",readonly:""},null,8,z),[[n.Jo,e.itemQuantity,void 0,{number:!0}]]),(0,l.bF)(p,{onClick:e=>(0,a.R1)(t).editItemQuantity("increase",o),class:"cursor-pointer active:text-emerald-400 hover:text-emerald-700 hover:scale-110",name:"bi-arrow-up-circle-fill",scale:"1.5",color:"#047857"},null,8,["onClick"]),(0,l.bF)(p,{onClick:e=>(0,a.R1)(t).editItemQuantity("decrease",o),class:"cursor-pointer active:text-sky-400",name:"bi-arrow-down-circle-fill",scale:"1.5",color:"#0369a1"},null,8,["onClick"])]),(0,l.Lk)("div",J,[(0,l.Lk)("div",M,[e.stock<=5?((0,l.uX)(),(0,l.Wv)(p,{key:0,class:(0,s.C4)([{"text-red-600":0==e.stock,"text-yellow-400":e.stock<=5&&e.stock>0},"cursor-pointer"]),name:"md-warning-round",scale:"1.5",title:"La existencia de este producto es baja"},null,8,["class"])):(0,l.Q3)("",!0),(0,l.Lk)("p",{class:(0,s.C4)([{"text-sky-800 bg-white shadow-md border-sky-800":e.stock>5,"border-red-600 text-red-600":0==e.stock,"text-yellow-600 bg-white shadow-md border-yellow-500":e.stock<=5&&e.stock>0},"inline-block px-3 border select-none shadow-sm font-bold rounded-lg min-w-[25%]"])},(0,s.v_)(e.stock),3)])]),(0,l.Lk)("p",B,(0,s.v_)(e.itemCode),1),(0,l.Lk)("div",Y,[(0,l.Lk)("p",Z," $"+(0,s.v_)(e.itemPrice),1)]),(0,l.Lk)("div",ee,[(0,l.Lk)("p",te," $"+(0,s.v_)(e.itemSubtotal),1)])],2)))),128))])),_:1}),0===(0,a.R1)(t).getCartItems.length?((0,l.uX)(),(0,l.CE)("div",oe,[d[2]||(d[2]=(0,l.Lk)("div",{class:"flex justify-center"},[(0,l.Lk)("img",{src:i,class:"w-20",alt:""})],-1)),(0,l.bo)((0,l.Lk)("h2",{class:"mt-2 font-semibold text-sky-700 font-poppins"},(0,s.v_)((0,a.R1)(m)),513),[[n.aG,(0,a.R1)(u)]]),(0,l.bo)((0,l.bF)(v,null,null,512),[[n.aG,(0,a.R1)(c)&&(0,a.R1)(r)]])])):(0,l.Q3)("",!0),(0,l.Lk)("div",le,[(0,l.Lk)("div",ae,[(0,l.bo)((0,l.Lk)("input",{onInput:g,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,a.i9)(r)?r.value=e:r=e),ref_key:"barcodeInput",ref:V,class:"text-lg font-semibold text-center rounded-md shadow-sm outline-none hover:border placeholder:text-gray-100 text-white bg-cyan-800 font-poppins min-w-28 max-w-[350px]",type:"text",placeholder:"Escanear o ingresar",readonly:""},null,544),[[n.Jo,(0,a.R1)(r)]]),(0,l.bF)(p,{onClick:y,class:"cursor-pointer active:text-cyan-700 hover:text-cyan-500 hover:scale-110",name:"ri-delete-back-2-fill",scale:"1.5",color:"#0891b2"})]),(0,l.Lk)("div",null,[(0,l.Lk)("div",{class:(0,s.C4)([{"bg-cyan-900 hover:bg-cyan-950":!(0,a.R1)(x),"bg-red-800 hover:bg-red-600":(0,a.R1)(x)},"px-4 py-[6px] font-medium text-white transition duration-150 ease-in-out rounded-lg cursor-pointer font-poppins"]),onClick:h},[(0,a.R1)(x)?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",ne,"Eliminar producto")),(0,a.R1)(x)?((0,l.uX)(),(0,l.CE)("p",se,"Desactivar eliminación")):(0,l.Q3)("",!0)],2)]),(0,l.Lk)("div",null,[(0,l.Lk)("button",{onClick:I,class:"px-4 py-1 text-xl text-white transition duration-150 ease-in-out rounded-lg bg-cyan-900 hover:bg-cyan-700 font-poppins"},"Vender ")]),(0,l.Lk)("div",null,[(0,l.Lk)("h3",ie,"Total: $"+(0,s.v_)((0,a.R1)(t).getTotalCartPrice),1)])])])])),_:1})])}}});const ce=(0,d.A)(re,[["__scopeId","data-v-794c91dc"]]);var de=ce}}]);
//# sourceMappingURL=scan.fba1cc0a.js.map